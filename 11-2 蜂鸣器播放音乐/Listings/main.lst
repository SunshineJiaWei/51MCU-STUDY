C51 COMPILER V9.60.7.0   MAIN                                                              05/20/2024 16:57:06 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          #include "Timer0.h"
   4          
   5          //ËúÇÈ∏£Âô®Á´ØÂè£ÂÆö‰πâ
   6          sbit Buzzer = P2^5;
   7          
   8          //Êí≠ÊîæÈÄüÂ∫¶ÔºåÂÄº‰∏∫ÂõõÂàÜÈü≥Á¨¶ÁöÑÊó∂Èïø(ms)
   9          #define SPEED   500
  10          
  11          //Èü≥Á¨¶‰∏éÁ¥¢ÂºïÂØπÂ∫îË°®ÔºåPÔºö‰ºëÊ≠¢Á¨¶ÔºåLÔºö‰ΩéÈü≥ÔºåMÔºö‰∏≠Èü≥ÔºåHÔºöÈ´òÈü≥Ôºå‰∏ãÂàíÁ∫øÔºöÂçáÂçäÈü≥Á
             -¨¶Âè∑#
  12          enum NOTE
  13          {
  14                  P_=0,
  15                  L1,L1_,L2,L2_,L3,L4,L4_,L5,L5_,L6,L6_,L7,
  16                  M1,M1_,M2,M2_,M3,M4,M4_,M5,M5_,M6,M6_,M7,
  17                  H1,H1_,H2,H2_,H3,H4,H4_,H5,H5_,H6,H6_,H7
  18          };
  19          
  20          //Á¥¢Âºï‰∏éÈ¢ëÁéáÂØπÁÖßË°®
  21          unsigned int FreqTable[] = {
  22                  0,
  23                  63628,63731,63835,63928,64021,64103,64185,64260,64331,64400,64463,64524, // ‰ΩéÈü≥
  24                  64580,64633,64684,64732,64777,64820,64860,64898,64934,64968,65000,65030, // ‰∏≠Èü≥
  25                  65058,65085,65110,65134,65157,65178,65198,65217,65235,65252,65268,65283  // È´òÈü≥
  26          };
  27          
  28          // Â∞èÊòüÊòüÊõ≤Ë∞±
  29          //unsigned char Music[] = {
  30          //      13,4,
  31          //      13,4,
  32          //      20,4,
  33          //      20,4,
  34          //      22,4,
  35          //      22,4,
  36          //      20,4+4,
  37          //      18,4,
  38          //      18,4,
  39          //      17,4,
  40          //      17,4,
  41          //      15,4,
  42          //      15,4,
  43          //      13,4+4
  44          //};
  45          
  46          // ‰πêË∞±
  47          // Â§©Á©∫‰πãÂüé
  48          // ÂèòÈáèÂêçÂâçÂä†ÂÖ•codeÂÖ≥ÈîÆÂ≠óÔºåÂ∞ÜÂÖ∂Â≠òÂÇ®Âú®ROM(Flash)‰∏≠ÔºåÂè™ÂèØËØª‰∏çÂèØÂÜô
  49          unsigned char code Music[] = {
  50                  //Èü≥Á¨¶,Êó∂ÂÄº,
  51                  //1
  52                  P_,     4,
  53                  P_,     4,
C51 COMPILER V9.60.7.0   MAIN                                                              05/20/2024 16:57:06 PAGE 2   

  54                  P_,     4,
  55                  M6,     2,
  56                  M7,     2,
  57                  
  58                  H1,     4+2,
  59                  M7,     2,
  60                  H1,     4,
  61                  H3,     4,
  62                  
  63                  M7,     4+4+4,
  64                  M3,     2,
  65                  M3,     2,
  66                  
  67                  //2
  68                  M6,     4+2,
  69                  M5,     2,
  70                  M6, 4,
  71                  H1,     4,
  72                  
  73                  M5,     4+4+4,
  74                  M3,     4,
  75                  
  76                  M4,     4+2,
  77                  M3,     2,
  78                  M4,     4,
  79                  H1,     4,
  80                  
  81                  //3
  82                  M3,     4+4,
  83                  P_,     2,
  84                  H1,     2,
  85                  H1,     2,
  86                  H1,     2,
  87                  
  88                  M7,     4+2,
  89                  M4_,2,
  90                  M4_,4,
  91                  M7,     4,
  92                  
  93                  M7,     8,
  94                  P_,     4,
  95                  M6,     2,
  96                  M7,     2,
  97                  
  98                  //4
  99                  H1,     4+2,
 100                  M7,     2,
 101                  H1,     4,
 102                  H3,     4,
 103                  
 104                  M7,     4+4+4,
 105                  M3,     2,
 106                  M3,     2,
 107                  
 108                  M6,     4+2,
 109                  M5,     2,
 110                  M6, 4,
 111                  H1,     4,
 112                  
 113                  //5
 114                  M5,     4+4+4,
 115                  M2,     2,
C51 COMPILER V9.60.7.0   MAIN                                                              05/20/2024 16:57:06 PAGE 3   

 116                  M3,     2,
 117                  
 118                  M4,     4,
 119                  H1,     2,
 120                  M7,     2+2,
 121                  H1,     2+4,
 122                  
 123                  H2,     2,
 124                  H2,     2,
 125                  H3,     2,
 126                  H1,     2+4+4,
 127                  
 128                  //6
 129                  H1,     2,
 130                  M7,     2,
 131                  M6,     2,
 132                  M6,     2,
 133                  M7,     4,
 134                  M5_,4,
 135                  
 136                  
 137                  M6,     4+4+4,
 138                  H1,     2,
 139                  H2,     2,
 140                  
 141                  H3,     4+2,
 142                  H2,     2,
 143                  H3,     4,
 144                  H5,     4,
 145                  
 146                  //7
 147                  H2,     4+4+4,
 148                  M5,     2,
 149                  M5,     2,
 150                  
 151                  H1,     4+2,
 152                  M7,     2,
 153                  H1,     4,
 154                  H3,     4,
 155                  
 156                  H3,     4+4+4+4,
 157                  
 158                  //8
 159                  M6,     2,
 160                  M7,     2,
 161                  H1,     4,
 162                  M7,     4,
 163                  H2,     2,
 164                  H2,     2,
 165                  
 166                  H1,     4+2,
 167                  M5,     2+4+4,
 168                  
 169                  H4,     4,
 170                  H3,     4,
 171                  H3,     4,
 172                  H1,     4,
 173                  
 174                  //9
 175                  H3,     4+4+4,
 176                  H3,     4,
 177                  
C51 COMPILER V9.60.7.0   MAIN                                                              05/20/2024 16:57:06 PAGE 4   

 178                  H6,     4+4,
 179                  H5,     4,
 180                  H5,     4,
 181                  
 182                  H3,     2,
 183                  H2,     2,
 184                  H1,     4+4,
 185                  P_,     2,
 186                  H1,     2,
 187                  
 188                  //10
 189                  H2,     4,
 190                  H1,     2,
 191                  H2,     2,
 192                  H2,     4,
 193                  H5,     4,
 194                  
 195                  H3,     4+4+4,
 196                  H3,     4,
 197                  
 198                  H6,     4+4,
 199                  H5,     4+4,
 200                  
 201                  //11
 202                  H3,     2,
 203                  H2,     2,
 204                  H1,     4+4,
 205                  P_,     2,
 206                  H1,     2,
 207                  
 208                  H2,     4,
 209                  H1,     2,
 210                  H2,     2+4,
 211                  M7,     4,
 212                  
 213                  M6,     4+4+4,
 214                  P_,     4,
 215                  
 216                  0xFF    //ÂÅúÊ≠¢Ê†áÂøó‰Ωç
 217          };
 218          
 219          unsigned char FreqSelect, MusicSelect;
 220          
 221          void main()
 222          {
 223   1              Timer0Init();
 224   1              while(1)
 225   1              {
 226   2                      if(FreqSelect != 0xFF)                                  //Â¶ÇÊûú‰∏çÊòØÂÅúÊ≠¢Ê†áÂøó‰Ωç
 227   2                      {
 228   3                              FreqSelect = Music[MusicSelect];        //ÈÄâÊã©Èü≥Á¨¶ÂØπÂ∫îÁöÑÈ¢ëÁéá
 229   3                              MusicSelect++;
 230   3                              // Delay(SPEED/4 * Music[MusicSelect]) ÈÄöËøáÈòªÂ°ûÁ®ãÂ∫èÊâßË°åÊù•ÊéßÂà∂Èü≥Á¨¶ÁöÑÊåÅÁª≠Êó∂Èó¥„ÄÇ
 231   3                              //Âú®Âª∂ËøüÊúüÈó¥ÔºåÂÆöÊó∂Âô®‰∏≠Êñ≠‰ºöÁªßÁª≠ÂàáÊç¢ËúÇÈ∏£Âô®ÁöÑÁä∂ÊÄÅÔºåÁª¥ÊåÅÈü≥Á¨¶ÁöÑÊí≠Êîæ„ÄÇÂª∂ËøüÊó
             -∂Èó¥ÈïøÁü≠ÂÜ≥ÂÆö‰∫ÜÊØè‰∏™Èü≥Á¨¶ÁöÑÊí≠ÊîæÊó∂ÈïøÔºå‰ªéËÄåÂΩ¢Êàê‰∏ÄÈ¶ñ‰πêÊõ≤
 232   3                              Delay(SPEED/4*Music[MusicSelect]);      //ÈÄâÊã©Èü≥Á¨¶ÂØπÂ∫îÁöÑÊó∂ÂÄº
 233   3                              MusicSelect++;
 234   3                              TR0 = 0;
 235   3                              Delay(5);                                                       //Èü≥Á¨¶Èó¥Áü≠ÊöÇÂÅúÈ°ø
 236   3                              TR0 = 1;
 237   3                      }
 238   2                      else                                                                    //Â¶ÇÊûúÊòØÂÅúÊ≠¢Ê†áÂøó‰Ωç
C51 COMPILER V9.60.7.0   MAIN                                                              05/20/2024 16:57:06 PAGE 5   

 239   2                      {
 240   3                              //ÈáçÊñ∞Êí≠ÊîæÈü≥‰πê
 241   3                              MusicSelect = 0;        
 242   3                              FreqSelect = 0;                         
 243   3                      }
 244   2                      
 245   2              }
 246   1      }
 247          
 248          void Timer0_Routine() interrupt 1 
 249          {
 250   1              // Âë®ÊúüË∂äÁü≠ÔºåÈ¢ëÁéáË∂äÈ´ò
 251   1              //ÂèñÂØπÂ∫îÈ¢ëÁéáÂÄºÁöÑÈáçË£ÖËΩΩÂÄºÂà∞ÂÆöÊó∂Âô®
 252   1              if(FreqTable[FreqSelect])                                       //Â¶ÇÊûú‰∏çÊòØ‰ºëÊ≠¢Á¨¶
 253   1              {
 254   2                      TL0 = FreqTable[FreqSelect] % 256;              //ËÆæÁΩÆÂÆöÊó∂ÂàùÂÄº
 255   2                      TH0 = FreqTable[FreqSelect] / 256;              //ËÆæÁΩÆÂÆöÊó∂ÂàùÂÄº
 256   2                      Buzzer = !Buzzer;                                               //ÁøªËΩ¨ËúÇÈ∏£Âô®IOÂè£
 257   2              }
 258   1      }
 259          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    101    ----
   CONSTANT SIZE    =    241    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     76    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
